<div class="global-container">
    <table mat-table [dataSource]="visibleAdvices" class="assets-table">
      <ng-container matColumnDef="expertName">
        <th mat-header-cell *matHeaderCellDef> Expert </th>
        <td mat-cell *matCellDef="let assetAdvisor"> 
          <span class="truncate">{{getAdvisor(assetAdvisor.userId).name}}</span>
          <div fxHide.gt-sm>
            <div class="expert-rating">
              <bar-rating [theme]="'fontawesome-o'" [readOnly]="'true'" [rate]="getAdvisor(assetAdvisor.userId).rating" [title]="getAdvisor(assetAdvisor.userId).rating | number: '1.2-2'"></bar-rating>
            </div>
          </div>
          <div fxHide.gt-xs class="white-button action-button-sm" [promiseBtn]="promiseExpert" *ngIf="getAdvisor(assetAdvisor.userId).following" (click)="onUnfollowExpertClick($event, getAdvisor(assetAdvisor.userId))">
            Unfollow
          </div>
          <div fxHide.gt-xs class="blue-button action-button-sm" [promiseBtn]="promiseExpert" *ngIf="!getAdvisor(assetAdvisor.userId).following" (click)="onFollowExpertClick($event, getAdvisor(assetAdvisor.userId))">
            Follow
          </div>

        </td>
      </ng-container>
    
      <ng-container matColumnDef="rankin">
        <th mat-header-cell *matHeaderCellDef><span fxHide.lt-md> Ranking </span></th>
        <td mat-cell *matCellDef="let assetAdvisor"> 
          <div fxHide.lt-md class="expert-rating">
            <bar-rating [theme]="'fontawesome-o'" [readOnly]="'true'" [rate]="getAdvisor(assetAdvisor.userId).rating" [title]="getAdvisor(assetAdvisor.userId).rating | number: '1.2-2'"></bar-rating>
          </div>
        </td>
      </ng-container>

      <ng-container matColumnDef="value">
        <th mat-header-cell *matHeaderCellDef><span fxHide.lt-md> Value </span></th>
        <td mat-cell *matCellDef="let assetAdvisor">  
          <div fxHide.lt-md >At price
            <div>{{assetAdvisor.lastAdviceAssetValue | valueDisplay}}</div>
          </div>
        </td>
      </ng-container>

      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef><span fxHide.lt-sm > Action </span></th>
        <td mat-cell *matCellDef="let assetAdvisor">
          <div fxHide.lt-sm>
            {{getRecomendationFromType(assetAdvisor.lastAdviceMode)}}
          </div>
        </td>
      </ng-container>

      <ng-container matColumnDef="position">
        <th mat-header-cell *matHeaderCellDef> Rating </th>
        <td mat-cell *matCellDef="let assetAdvisor">
            <div [style.background-color]="getAdviceTypeColor(assetAdvisor.lastAdviceType)">
              {{getRecommendationFromType(assetAdvisor.lastAdviceType)}}
              <span fxHide.gt-sm>At price {{assetAdvisor.lastAdviceAssetValue | valueDisplay}}</span>
            </div>
            <div fxHide.gt-xs [title]="assetAdvisor.lastAdviceDate | date: 'medium'">{{assetAdvisor.lastAdviceDate | timeAgo}}</div>
        </td>
      </ng-container>

      <ng-container matColumnDef="date">
        <th mat-header-cell *matHeaderCellDef><span fxHide.lt-sm> Date </span></th>
        <td mat-cell *matCellDef="let assetAdvisor">
          <div fxHide.lt-sm [title]="assetAdvisor.lastAdviceDate | date: 'medium'">{{assetAdvisor.lastAdviceDate | timeAgo}}</div>
        </td>
      </ng-container>

      <ng-container matColumnDef="followButton">
        <th mat-header-cell *matHeaderCellDef> </th>
        <td  mat-cell *matCellDef="let assetAdvisor">
          <div fxHide.lt-sm class="white-button action-button-sm" [promiseBtn]="promiseExpert" *ngIf="getAdvisor(assetAdvisor.userId).following" (click)="onUnfollowExpertClick($event, getAdvisor(assetAdvisor.userId))">
            Unfollow
          </div>
          <div fxHide.lt-sm class="blue-button action-button-sm" [promiseBtn]="promiseExpert" *ngIf="!getAdvisor(assetAdvisor.userId).following" (click)="onFollowExpertClick($event, getAdvisor(assetAdvisor.userId))">
            Follow
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row matRipple *matRowDef="let row; columns: displayedColumns;" (click)="onRowClick(row)" class="element-row"></tr>
    </table>
    <div *ngIf="hasMoreAdvices()" fxLayoutAlign="center center">
      <button class="pagination-link" (click)="loadMoreAdvices()">
        LOAD MORE
      </button>
    </div>
  </div>